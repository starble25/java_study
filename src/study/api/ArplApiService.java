package study.api;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.List;

import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;

public class ArplApiService {

	public static String forecaseDust(String date) throws IOException {
		
        StringBuilder urlBuilder = new StringBuilder("http://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getMinuDustFrcstDspth"); /*URL*/
        urlBuilder.append("?" + URLEncoder.encode("serviceKey","UTF-8") + "=서비스키"); /*Service Key*/
        urlBuilder.append("&" + URLEncoder.encode("returnType","UTF-8") + "=" + URLEncoder.encode("json", "UTF-8")); /*xml 또는 json*/
        urlBuilder.append("&" + URLEncoder.encode("numOfRows","UTF-8") + "=" + URLEncoder.encode("100", "UTF-8")); /*한 페이지 결과 수(조회 날짜로 검색 시 사용 안함)*/
        urlBuilder.append("&" + URLEncoder.encode("pageNo","UTF-8") + "=" + URLEncoder.encode("1", "UTF-8")); /*페이지번호(조회 날짜로 검색 시 사용 안함)*/
        urlBuilder.append("&" + URLEncoder.encode("searchDate","UTF-8") + "=" + URLEncoder.encode(date, "UTF-8")); /*통보시간 검색(조회 날짜 입력이 없을 경우 한달동안 예보통보 발령 날짜의 리스트 정보를 확인)*/
        urlBuilder.append("&" + URLEncoder.encode("InformCode","UTF-8") + "=" + URLEncoder.encode("PM10", "UTF-8")); /*통보코드검색(PM10, PM25, O3)*/
        
        URL url = new URL(urlBuilder.toString());
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();
        conn.setRequestMethod("GET");
        conn.setRequestProperty("Content-type", "application/json");
        System.out.println("Response code: " + conn.getResponseCode());
        BufferedReader rd;
        if(conn.getResponseCode() >= 200 && conn.getResponseCode() <= 300) {
            rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        } else {
            rd = new BufferedReader(new InputStreamReader(conn.getErrorStream()));
        }
        StringBuilder sb = new StringBuilder();
        String line;
        while ((line = rd.readLine()) != null) {
            sb.append(line);
        }
        rd.close();
        conn.disconnect();
        
//        System.out.println(sb.toString());
        String result = sb.toString();
        
        return result;
	}
	
	public static List<ArplInfo> forecaseDustArplInfoList(String date) throws IOException {
		
		List<ArplInfo> arplList = new ArrayList<ArplInfo>();
		
		try {
			//String jsonText = ArplApiService.forecaseDust("2024-12-21");
        	
        	String jsonText = "{\"response\":{\"body\":{\"totalCount\":20,\"items\":[{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122121.png\",\"informCode\":\"PM10\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122203.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122209.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 일부 중부 지역은 전일 미세먼지가 잔류하고, 국외 미세먼지가 유입되어 농도가 높을 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 서울·경기도는 '나쁨', 그 밖의 권역은 '보통'으로 예상됩니다. 다만, 밤에 강원영서는 '나쁨' 수준일 것으로 예상됩니다.\",\"informData\":\"2024-12-21\",\"informGrade\":\"서울 : 보통,제주 : 보통,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 보통,울산 : 보통,대구 : 보통,부산 : 좋음,충남 : 보통,충북 : 보통,세종 : 보통,대전 : 보통,영동 : 좋음,영서 : 보통,경기남부 : 보통,경기북부 : 보통,인천 : 보통\",\"dataTime\":\"2024-12-21 23시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122209.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122203.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122121.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122121.png\",\"informCode\":\"PM10\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122203.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122209.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'으로 예상됩니다.\",\"informData\":\"2024-12-22\",\"informGrade\":\"서울 : 좋음,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 좋음,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 좋음,경기북부 : 좋음,인천 : 좋음\",\"dataTime\":\"2024-12-21 23시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122209.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122203.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122121.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122221.png\",\"informCode\":\"PM10\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122303.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122309.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 대체로 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'∼'보통'으로 예상됩니다.\",\"informData\":\"2024-12-23\",\"informGrade\":\"서울 : 좋음,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 좋음,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 좋음,경기북부 : 좋음,인천 : 좋음\",\"dataTime\":\"2024-12-21 23시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122309.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122303.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122221.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122121.png\",\"informCode\":\"PM25\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122203.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122209.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 일부 중부 지역은 전일 미세먼지가 잔류하고, 국외 미세먼지가 유입되어 농도가 높을 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 서울·경기도는 '나쁨', 그 밖의 권역은 '보통'으로 예상됩니다. 다만, 밤에 강원영서는 '나쁨' 수준일 것으로 예상됩니다.\",\"informData\":\"2024-12-21\",\"informGrade\":\"서울 : 나쁨,제주 : 보통,전남 : 보통,전북 : 보통,광주 : 보통,경남 : 보통,경북 : 보통,울산 : 보통,대구 : 보통,부산 : 보통,충남 : 보통,충북 : 보통,세종 : 보통,대전 : 보통,영동 : 보통,영서 : 보통,경기남부 : 나쁨,경기북부 : 나쁨,인천 : 보통\",\"dataTime\":\"2024-12-21 23시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122209.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122203.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122121.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122121.png\",\"informCode\":\"PM25\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122203.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122209.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'으로 예상됩니다.\",\"informData\":\"2024-12-22\",\"informGrade\":\"서울 : 좋음,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 좋음,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 좋음,경기북부 : 좋음,인천 : 좋음\",\"dataTime\":\"2024-12-21 23시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122209.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122203.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122121.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122221.png\",\"informCode\":\"PM25\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122303.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM2P5.1hsp.2024122309.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 대체로 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'∼'보통'으로 예상됩니다.\",\"informData\":\"2024-12-23\",\"informGrade\":\"서울 : 보통,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 보통,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 보통,경기북부 : 보통,인천 : 보통\",\"dataTime\":\"2024-12-21 23시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122309.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122303.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/23/09km/AQF.20241221.NIER_09_01.PM10.1hsp.2024122221.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122121.png\",\"informCode\":\"PM10\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122203.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122209.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 대부분 중부 지역과 대부분 남부 지역은 전일 미세먼지가 잔류하고, 국외 미세먼지가 유입되어 농도가 높을 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 서울·경기도·강원영서·세종·충북은 '나쁨', 그 밖의 권역은 '보통'으로 예상됩니다. 다만, 밤에 대전·영남권은 '나쁨' 수준일 것으로 예상됩니다.\",\"informData\":\"2024-12-21\",\"informGrade\":\"서울 : 보통,제주 : 보통,전남 : 보통,전북 : 보통,광주 : 보통,경남 : 보통,경북 : 보통,울산 : 보통,대구 : 보통,부산 : 보통,충남 : 보통,충북 : 보통,세종 : 보통,대전 : 보통,영동 : 좋음,영서 : 보통,경기남부 : 보통,경기북부 : 보통,인천 : 보통\",\"dataTime\":\"2024-12-21 17시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122209.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122203.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122121.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122121.png\",\"informCode\":\"PM10\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122203.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122209.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'으로 예상됩니다.\",\"informData\":\"2024-12-22\",\"informGrade\":\"서울 : 좋음,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 좋음,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 좋음,경기북부 : 좋음,인천 : 좋음\",\"dataTime\":\"2024-12-21 17시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122209.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122203.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122121.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122221.png\",\"informCode\":\"PM10\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122303.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122309.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 대체로 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'∼'보통'으로 예상됩니다.\",\"informData\":\"2024-12-23\",\"informGrade\":\"서울 : 좋음,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 좋음,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 좋음,경기북부 : 좋음,인천 : 좋음\",\"dataTime\":\"2024-12-21 17시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122309.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122303.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122221.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122121.png\",\"informCode\":\"PM25\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122203.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122209.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 대부분 중부 지역과 대부분 남부 지역은 전일 미세먼지가 잔류하고, 국외 미세먼지가 유입되어 농도가 높을 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 서울·경기도·강원영서·세종·충북은 '나쁨', 그 밖의 권역은 '보통'으로 예상됩니다. 다만, 밤에 대전·영남권은 '나쁨' 수준일 것으로 예상됩니다.\",\"informData\":\"2024-12-21\",\"informGrade\":\"서울 : 나쁨,제주 : 보통,전남 : 보통,전북 : 보통,광주 : 보통,경남 : 보통,경북 : 보통,울산 : 보통,대구 : 보통,부산 : 보통,충남 : 보통,충북 : 나쁨,세종 : 나쁨,대전 : 보통,영동 : 보통,영서 : 나쁨,경기남부 : 나쁨,경기북부 : 나쁨,인천 : 보통\",\"dataTime\":\"2024-12-21 17시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122209.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122203.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122121.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122121.png\",\"informCode\":\"PM25\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122203.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122209.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'으로 예상됩니다.\",\"informData\":\"2024-12-22\",\"informGrade\":\"서울 : 좋음,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 좋음,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 좋음,경기북부 : 좋음,인천 : 좋음\",\"dataTime\":\"2024-12-21 17시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122209.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122203.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122121.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122221.png\",\"informCode\":\"PM25\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122303.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122309.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 대체로 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'∼'보통'으로 예상됩니다.\",\"informData\":\"2024-12-23\",\"informGrade\":\"서울 : 보통,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 보통,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 보통,경기북부 : 보통,인천 : 보통\",\"dataTime\":\"2024-12-21 17시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122309.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122303.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/17/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122221.png\"},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122103.png\",\"informCode\":\"PM10\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122109.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122115.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 대부분 중부 지역과 대부분 남부 지역은 전일 미세먼지가 잔류하고, 국외 미세먼지가 유입되어 농도가 높을 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 서울·경기도·강원영서·세종·충북은 '나쁨', 그 밖의 권역은 '보통'으로 예상됩니다. 다만, 오후에 인천·대전·충남·광주·대구·경북·제주권은 '나쁨' 수준일 것으로 예상됩니다.\",\"informData\":\"2024-12-21\",\"informGrade\":\"서울 : 보통,제주 : 보통,전남 : 보통,전북 : 보통,광주 : 보통,경남 : 보통,경북 : 보통,울산 : 보통,대구 : 보통,부산 : 보통,충남 : 보통,충북 : 보통,세종 : 보통,대전 : 보통,영동 : 보통,영서 : 보통,경기남부 : 보통,경기북부 : 보통,인천 : 보통\",\"dataTime\":\"2024-12-21 11시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122115.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122109.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122103.png\"},{\"imageUrl4\":null,\"informCode\":\"PM10\",\"imageUrl5\":null,\"imageUrl6\":null,\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'으로 예상됩니다.\",\"informData\":\"2024-12-22\",\"informGrade\":\"서울 : 좋음,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 좋음,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 좋음,경기북부 : 좋음,인천 : 좋음\",\"dataTime\":\"2024-12-21 11시 발표\",\"imageUrl3\":null,\"imageUrl2\":null,\"imageUrl1\":null},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122103.png\",\"informCode\":\"PM25\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122109.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122115.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 대부분 중부 지역과 대부분 남부 지역은 전일 미세먼지가 잔류하고, 국외 미세먼지가 유입되어 농도가 높을 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 서울·경기도·강원영서·세종·충북은 '나쁨', 그 밖의 권역은 '보통'으로 예상됩니다. 다만, 오후에 인천·대전·충남·광주·대구·경북·제주권은 '나쁨' 수준일 것으로 예상됩니다.\",\"informData\":\"2024-12-21\",\"informGrade\":\"서울 : 나쁨,제주 : 보통,전남 : 보통,전북 : 보통,광주 : 보통,경남 : 보통,경북 : 보통,울산 : 보통,대구 : 보통,부산 : 보통,충남 : 보통,충북 : 나쁨,세종 : 나쁨,대전 : 보통,영동 : 보통,영서 : 나쁨,경기남부 : 나쁨,경기북부 : 나쁨,인천 : 보통\",\"dataTime\":\"2024-12-21 11시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122115.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122109.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/11/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122103.png\"},{\"imageUrl4\":null,\"informCode\":\"PM25\",\"imageUrl5\":null,\"imageUrl6\":null,\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'으로 예상됩니다.\",\"informData\":\"2024-12-22\",\"informGrade\":\"서울 : 좋음,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 좋음,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 좋음,경기북부 : 좋음,인천 : 좋음\",\"dataTime\":\"2024-12-21 11시 발표\",\"imageUrl3\":null,\"imageUrl2\":null,\"imageUrl1\":null},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122100.png\",\"informCode\":\"PM10\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122106.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122112.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 대부분 중부 지역과 일부 남부 지역은 전일 미세먼지가 잔류하고, 국외 미세먼지가 유입되어 농도가 높을 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 서울·경기도·강원영서·세종·충북은 '나쁨', 그 밖의 권역은 '보통'으로 예상됩니다. 다만, 오전에 인천·대전·충남, 오후에 대구·경북은 '나쁨' 수준일 것으로 예상됩니다.\",\"informData\":\"2024-12-21\",\"informGrade\":\"서울 : 보통,제주 : 보통,전남 : 보통,전북 : 보통,광주 : 보통,경남 : 보통,경북 : 보통,울산 : 보통,대구 : 보통,부산 : 보통,충남 : 보통,충북 : 보통,세종 : 보통,대전 : 보통,영동 : 보통,영서 : 보통,경기남부 : 보통,경기북부 : 보통,인천 : 보통\",\"dataTime\":\"2024-12-21 05시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122112.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122106.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122100.png\"},{\"imageUrl4\":null,\"informCode\":\"PM10\",\"imageUrl5\":null,\"imageUrl6\":null,\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'으로 예상됩니다.\",\"informData\":\"2024-12-22\",\"informGrade\":\"서울 : 좋음,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 좋음,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 좋음,경기북부 : 좋음,인천 : 좋음\",\"dataTime\":\"2024-12-21 05시 발표\",\"imageUrl3\":null,\"imageUrl2\":null,\"imageUrl1\":null},{\"imageUrl4\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122100.png\",\"informCode\":\"PM25\",\"imageUrl5\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122106.png\",\"imageUrl6\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM2P5.1hsp.2024122112.png\",\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 대부분 중부 지역과 일부 남부 지역은 전일 미세먼지가 잔류하고, 국외 미세먼지가 유입되어 농도가 높을 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 서울·경기도·강원영서·세종·충북은 '나쁨', 그 밖의 권역은 '보통'으로 예상됩니다. 다만, 오전에 인천·대전·충남, 오후에 대구·경북은 '나쁨' 수준일 것으로 예상됩니다.\",\"informData\":\"2024-12-21\",\"informGrade\":\"서울 : 나쁨,제주 : 보통,전남 : 보통,전북 : 보통,광주 : 보통,경남 : 보통,경북 : 보통,울산 : 보통,대구 : 보통,부산 : 보통,충남 : 보통,충북 : 나쁨,세종 : 나쁨,대전 : 보통,영동 : 보통,영서 : 나쁨,경기남부 : 나쁨,경기북부 : 나쁨,인천 : 보통\",\"dataTime\":\"2024-12-21 05시 발표\",\"imageUrl3\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122112.png\",\"imageUrl2\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122106.png\",\"imageUrl1\":\"https://www.airkorea.or.kr/file/proxyImage?fileName=2024/12/21/05/09km/AQF.20241220.NIER_09_01.PM10.1hsp.2024122100.png\"},{\"imageUrl4\":null,\"informCode\":\"PM25\",\"imageUrl5\":null,\"imageUrl6\":null,\"actionKnack\":null,\"informCause\":\"○ [미세먼지] 원활한 대기 확산으로 대기질이 청정할 것으로 예상됩니다.\",\"informOverall\":\"○ [미세먼지] 전 권역이 '좋음'으로 예상됩니다.\",\"informData\":\"2024-12-22\",\"informGrade\":\"서울 : 좋음,제주 : 좋음,전남 : 좋음,전북 : 좋음,광주 : 좋음,경남 : 좋음,경북 : 좋음,울산 : 좋음,대구 : 좋음,부산 : 좋음,충남 : 좋음,충북 : 좋음,세종 : 좋음,대전 : 좋음,영동 : 좋음,영서 : 좋음,경기남부 : 좋음,경기북부 : 좋음,인천 : 좋음\",\"dataTime\":\"2024-12-21 05시 발표\",\"imageUrl3\":null,\"imageUrl2\":null,\"imageUrl1\":null}],\"pageNo\":1,\"numOfRows\":100},\"header\":{\"resultMsg\":\"NORMAL_CODE\",\"resultCode\":\"00\"}}}";
			
			System.out.println("*******요청 결과 텍스트*******");
			System.out.println(jsonText);	//json format API 요청 결과 -> 응답 데이터 확보
			
			//json 포맷 텍스트 -> 원하는 형태로 변환 -> 활용(DB 저장)
			
			JSONParser jsonParser = new JSONParser();
			JSONObject jsonObj = (JSONObject)jsonParser.parse(jsonText); // 최초 json포맷 텍스트 -> json객체
			JSONObject response = (JSONObject)jsonObj.get("response");
			
			JSONObject header = (JSONObject)response.get("header");
			System.out.println(header.get("resultMsg"));
			System.out.println(header.get("resultCode"));
			
			JSONObject body = (JSONObject)response.get("body");
			System.out.println(body.get("totalCount"));
			
			JSONArray items = (JSONArray)body.get("items");
			
			for(int i=0; i<items.size(); i++) {
				JSONObject item = (JSONObject)items.get(i);
//				System.out.println(">>>index:" + i);
//				System.out.println(item.get("informData"));
//				System.out.println(item.get("informOverall"));
				
				ArplInfo ai = new ArplInfo();
				ai.setInformCode( convertValueToString(item.get("informCode")) );
				ai.setActionKnack( convertValueToString(item.get("actionKnack")) );
				ai.setInformCause( convertValueToString(item.get("informCause")) );
				ai.setInformData( convertValueToString(item.get("informData")) );
				ai.setInformGrade( convertValueToString(item.get("informGrade")) );
				ai.setImageUrl( convertValueToString(item.get("imageUrl")) );
				
				arplList.add(ai);
			}
			
			//json -> 자바 ArplInfo 객체로 변환 완료
//			for(ArplInfo info : arplList) {
//				System.out.println( info.toString() );
//			}
			
			
			
		} catch (Exception e) {
			e.printStackTrace();
		}
		
		return arplList;
	}
	
    public static String convertValueToString(Object obj) {
    	
    	return obj == null ? "" : obj.toString();
    }
}
